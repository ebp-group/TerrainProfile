<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 Copyright 2010 Google Inc. 
 Licensed under the Apache License, Version 2.0: 
 http://www.apache.org/licenses/LICENSE-2.0 
 Originalcode: http://gmaps-samples-v3.googlecode.com/svn/trunk/elevation/elevation-profile.html

 Adapted 2010 by Ernst Basler + Partner AG. 
 Changes done under under the Apache License, Version 2.0: 
 http://www.apache.org/licenses/LICENSE-2.0 
 -->
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Profils d'altitude basé sur Google Maps, développé par Ernst Basler + Partner AG</title>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">// i18next, v1.5.6
// Copyright (c)2012 Jan Mühlemann (jamuhl).
// Distributed under MIT license
// http://i18next.com
(function(){function a(e,t){if(!t||typeof t=="function")return e;for(var n in t)e[n]=t[n];return e}function f(e,t,n){var r,i=0,s=e.length,o=s===undefined||typeof e=="function";if(n){if(o){for(r in e)if(t.apply(e[r],n)===!1)break}else for(;i<s;)if(t.apply(e[i++],n)===!1)break}else if(o){for(r in e)if(t.call(e[r],r,e[r])===!1)break}else for(;i<s;)if(t.call(e[i],i,e[i++])===!1)break;return e}function l(e){var t=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(new Error)},n=function(e){if(typeof e=="string")return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},r=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},i=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=r(e);var n="",i,s,o,u,a,f,l,c=0;do i=e.charCodeAt(c++),s=e.charCodeAt(c++),o=e.charCodeAt(c++),u=i>>2,a=(i&3)<<4|s>>4,f=(s&15)<<2|o>>6,l=o&63,isNaN(s)?f=l=64:isNaN(o)&&(l=64),n+=t.charAt(u)+t.charAt(a)+t.charAt(f)+t.charAt(l),i=s=o="",u=a=f=l="";while(c<e.length);return n},s=function(){var e=arguments[0];for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},o=function(e,r,i,u){typeof i=="function"&&(u=i,i={}),i.cache=i.cache||!1,i.data=i.data||{},i.headers=i.headers||{},i.jsonp=i.jsonp||!1,i.async=i.async===undefined?!0:i.async;var a=s({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},o.headers,i.headers),f;a["content-type"]==="application/json"?f=JSON.stringify(i.data):f=n(i.data);if(e==="GET"){var l=[];f&&(l.push(f),f=null),i.cache||l.push("_="+(new Date).getTime()),i.jsonp&&(l.push("callback="+i.jsonp),l.push("jsonp="+i.jsonp)),l="?"+l.join("&"),r+=l!=="?"?l:"";if(i.jsonp){var c=document.getElementsByTagName("head")[0],h=document.createElement("script");h.type="text/javascript",h.src=r,c.appendChild(h);return}}t(function(t,n){if(t)return u(t);n.open(e,r,i.async);for(var s in a)a.hasOwnProperty(s)&&n.setRequestHeader(s,a[s]);n.onreadystatechange=function(){if(n.readyState===4){var e=n.responseText||"";if(!u)return;u(n.status,{text:function(){return e},json:function(){return JSON.parse(e)}})}},n.send(f)})},u={authBasic:function(e,t){o.headers.Authorization="Basic "+i(e+":"+t)},connect:function(e,t,n){return o("CONNECT",e,t,n)},del:function(e,t,n){return o("DELETE",e,t,n)},get:function(e,t,n){return o("GET",e,t,n)},head:function(e,t,n){return o("HEAD",e,t,n)},headers:function(e){o.headers=e||{}},isAllowed:function(e,t,n){this.options(e,function(e,r){n(r.text().indexOf(t)!==-1)})},options:function(e,t,n){return o("OPTIONS",e,t,n)},patch:function(e,t,n){return o("PATCH",e,t,n)},post:function(e,t,n){return o("POST",e,t,n)},put:function(e,t,n){return o("PUT",e,t,n)},trace:function(e,t,n){return o("TRACE",e,t,n)}},a=e.sendType?e.sendType.toLowerCase():"get";u[a](e.url,{async:e.async},function(t,n){t===200?e.success(n.json(),t,null):e.error(n.text(),t,null)})}function d(e,s){typeof e=="function"&&(s=e,e={}),e=e||{},p.extend(u,e),typeof u.ns=="string"&&(u.ns={namespaces:[u.ns],defaultNs:u.ns}),u.lng||(u.lng=p.detectLanguage()),u.lng?p.cookie.create("i18next",u.lng,u.cookieExpirationTime):(u.lng=u.fallbackLng,p.cookie.remove("i18next")),o=p.toLanguages(u.lng),i=o[0],p.log("currentLng set to: "+i),L.setCurrentLng(i),t&&u.setJqueryExt&&y();var a;t&&t.Deferred&&(a=t.Deferred());if(u.resStore)return r=u.resStore,s&&s(x),a&&a.resolve(),a;var f=p.toLanguages(u.lng);typeof u.preload=="string"&&(u.preload=[u.preload]);for(var l=0,c=u.preload.length;l<c;l++){var h=p.toLanguages(u.preload[l]);for(var d=0,v=h.length;d<v;d++)f.indexOf(h[d])<0&&f.push(h[d])}return n.sync.load(f,u,function(e,t){r=t,s&&s(x),a&&a.resolve()}),a}function v(e,t){typeof e=="string"&&(e=[e]);for(var n=0,r=e.length;n<r;n++)u.preload.indexOf(e[n])<0&&u.preload.push(e[n]);return d(t)}function m(e,t){return d({lng:e},t)}function g(){return i}function y(){function e(e,n,r){if(n.length===0)return;var i="text";if(n.indexOf("[")===0){var s=n.split("]");n=s[1],i=s[0].substr(1,s[0].length-1)}n.indexOf(";")===n.length-1&&(n=n.substr(0,n.length-2));var o;i==="html"?(o=t.extend({defaultValue:e.html()},r),e.html(t.t(n,o))):i==="text"?(o=t.extend({defaultValue:e.text()},r),e.text(t.t(n,o))):(o=t.extend({defaultValue:e.attr(i)},r),e.attr(i,t.t(n,o)))}function n(n,r){var i=n.attr("data-i18n");if(!i)return;!r&&u.useDataAttrOptions===!0&&(r=n.data("i18n-options")),r=r||{};if(i.indexOf(";")<=i.length-1){var s=i.split(";");t.each(s,function(t,i){e(n,i,r)})}else e(n,k,r);u.useDataAttrOptions===!0&&n.data("i18n-options",r)}t.t=t.t||x,t.fn.i18n=function(e){return this.each(function(){n(t(this),e);var r=t(this).find("[data-i18n]");r.each(function(){n(t(this),e)})})}}function b(e,t,n){return e.indexOf(u.interpolationPrefix)<0?e:(p.each(t,function(t,r){typeof r=="object"?e=b(e,r,t):e=e.replace(new RegExp([u.interpolationPrefix,n?n+"."+t:t,u.interpolationSuffix].join(""),"g"),r)}),e)}function w(e,t){var n=p.extend({},t);delete n.postProcess;while(e.indexOf(u.reusePrefix)!=-1){s++;if(s>u.maxRecursion)break;var r=e.indexOf(u.reusePrefix),i=e.indexOf(u.reuseSuffix,r)+u.reuseSuffix.length,o=e.substring(r,i),a=o.replace(u.reusePrefix,"").replace(u.reuseSuffix,""),f=T(a,n);e=e.replace(o,f)}return e}function E(e){return e.context&&typeof e.context=="string"}function S(e){return e.count!==undefined&&typeof e.count!="string"&&e.count!==1}function x(e,t){return s=0,T(e,t)}function T(e,t){t=t||{};var s,a,f=t.defaultValue||e,l=o;if(t.lng){l=p.toLanguages(t.lng);if(!r[l[0]]){var c=u.getAsync;u.getAsync=!1,n.sync.load(l,u,function(e,t){p.extend(r,t),u.getAsync=c})}}if(!r)return f;var h=u.ns.defaultNs;if(e.indexOf(u.nsseparator)>-1){var d=e.split(u.nsseparator);h=d[0],e=d[1]}if(E(t)){s=p.extend({},t),delete s.context,s.defaultValue=u.contextNotFound;var v=h+":"+e+"_"+t.context;a=x(v,s);if(a!=u.contextNotFound)return b(a,{context:t.context})}if(S(t)){s=p.extend({},t),delete s.count,s.defaultValue=u.pluralNotFound;var m=h+":"+e+u.pluralSuffix,g=L.get(i,t.count);g>=0?m=m+"_"+g:g===1&&(m=h+":"+e),a=x(m,s);if(a!=u.pluralNotFound)return b(a,{count:t.count})}var y,N=e.split(u.keyseparator);for(var k=0,O=l.length;k<O;k++){if(y)break;var M=l[k],_=0,D=r[M]&&r[M][h];while(N[_])D=D&&D[N[_]],_++;if(D){if(typeof D=="string")D=b(D,t),D=w(D,t);else if(Object.prototype.toString.apply(D)==="[object Array]"&&!u.returnObjectTrees&&!t.returnObjectTrees)D=D.join("\n"),D=b(D,t),D=w(D,t);else if(!u.returnObjectTrees&&!t.returnObjectTrees)D="key '"+h+":"+e+" ("+M+")' "+"returned a object instead of string.",p.log(D);else for(var P in D)D[P]=T(e+"."+P,t);y=D}}!y&&u.sendMissing&&(t.lng?C.postMissing(t.lng,h,e,f,l):C.postMissing(u.lng,h,e,f,l));var H=t.postProcess||u.postProcess;return y&&H&&A[H]&&(y=A[H](y,e,t)),y||(f=b(f,t),f=w(f,t)),y?y:f}function N(){var e,t=[];typeof window!="undefined"&&(function(){var e=window.location.search.substring(1),n=e.split("&");for(var r=0;r<n.length;r++){var i=n[r].indexOf("=");if(i>0){var s=n[r].substring(0,i),o=n[r].substring(i+1);t[s]=o}}}(),t.setLng&&(e=t.setLng));if(!e&&typeof document!="undefined"){var n=p.cookie.read("i18next");n&&(e=n)}return!e&&typeof navigator!="undefined"&&(e=navigator.language?navigator.language:navigator.userLanguage),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1});var e=this,t=e.jQuery,n={},r={},i,s=0,o=[];typeof module!="undefined"&&module.exports?module.exports=n:(t&&(t.i18n=t.i18n||n),e.i18n=e.i18n||n);var u={lng:undefined,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",ns:"translation",nsseparator:":",keyseparator:".",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:undefined,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),setJqueryExt:!0,useDataAttrOptions:!1,cookieExpirationTime:undefined,postProcess:undefined},c={create:function(e,t,n){var r;if(n){var i=new Date;i.setTime(i.getTime()+n*60*1e3),r="; expires="+i.toGMTString()}else r="";document.cookie=e+"="+t+r+"; path=/"},read:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},h={create:function(e,t,n){},read:function(e){return null},remove:function(e){}},p={extend:t?t.extend:a,each:t?t.each:f,ajax:t?t.ajax:l,cookie:typeof document!="undefined"?c:h,detectLanguage:N,log:function(e){u.debug&&console.log(e)},toLanguages:function(e){var t=[];if(e.indexOf("-")===2&&e.length===5){var n=e.split("-");e=u.lowerCaseLng?n[0].toLowerCase()+"-"+n[1].toLowerCase():n[0].toLowerCase()+"-"+n[1].toUpperCase(),u.load!=="unspecific"&&t.push(e),u.load!=="current"&&t.push(e.substr(0,2))}else t.push(e);return t.indexOf(u.fallbackLng)===-1&&u.fallbackLng&&t.push(u.fallbackLng),t}},C={load:function(e,t,n){t.useLocalStorage?C._loadLocal(e,t,function(r,i){var s=[];for(var o=0,u=e.length;o<u;o++)i[e[o]]||s.push(e[o]);s.length>0?C._fetch(s,t,function(e,t){p.extend(i,t),C._storeLocal(t),n(null,i)}):n(null,i)}):C._fetch(e,t,function(e,t){n(null,t)})},_loadLocal:function(e,t,n){var r={},i=(new Date).getTime();if(window.localStorage){var s=e.length;p.each(e,function(e,o){var u=window.localStorage.getItem("res_"+o);u&&(u=JSON.parse(u),u.i18nStamp&&u.i18nStamp+t.localStorageExpirationTime>i&&(r[o]=u)),s--,s===0&&n(null,r)})}},_storeLocal:function(e){if(window.localStorage)for(var t in e)e[t].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+t,JSON.stringify(e[t]));return},_fetch:function(e,t,n){var r=t.ns,i={};if(!t.dynamicLoad){var s=r.namespaces.length*e.length,o;p.each(r.namespaces,function(r,u){p.each(e,function(e,r){C._fetchOne(r,u,t,function(e,t){e&&(o=o||[],o.push(e)),i[r]=i[r]||{},i[r][u]=t,s--,s===0&&n(o,i)})})})}else{var u=b(t.resGetPath,{lng:e.join("+"),ns:r.namespaces.join("+")});p.ajax({url:u,success:function(e,t,r){p.log("loaded: "+u),n(null,e)},error:function(e,t,r){p.log("failed loading: "+u),n("failed loading resource.json error: "+r)},dataType:"json",async:t.getAsync})}},_fetchOne:function(e,t,n,r){var i=b(n.resGetPath,{lng:e,ns:t});p.ajax({url:i,success:function(e,t,n){p.log("loaded: "+i),r(null,e)},error:function(e,t,n){p.log("failed loading: "+i),r(n,{})},dataType:"json",async:n.getAsync})},postMissing:function(e,t,n,i,s){var o={};o[n]=i;var a=[];if(u.sendMissingTo==="fallback")a.push({lng:u.fallbackLng,url:b(u.resPostPath,{lng:u.fallbackLng,ns:t})});else if(u.sendMissingTo==="current")a.push({lng:e,url:b(u.resPostPath,{lng:e,ns:t})});else if(u.sendMissingTo==="all")for(var f=0,l=s.length;f<l;f++)a.push({lng:s[f],url:b(u.resPostPath,{lng:s[f],ns:t})});for(var c=0,h=a.length;c<h;c++){var d=a[c];p.ajax({url:d.url,type:u.sendType,data:o,success:function(e,s,o){p.log("posted missing key '"+n+"' to: "+d.url),r[d.lng][t][n]=i},error:function(e,t,r){p.log("failed posting missing key '"+n+"' to: "+d.url)},dataType:"json",async:u.postAsync})}}},L={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(e){return Number(e>1)}},af:{name:"Afrikaans",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ak:{name:"Akan",numbers:[1,2],plurals:function(e){return Number(e>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(e){return Number(e>1)}},an:{name:"Aragonese",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(e){return Number(e===0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ast:{name:"Asturian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ay:{name:"Aymará",numbers:[1],plurals:function(e){return 0}},az:{name:"Azerbaijani",numbers:[2,1],plurals:function(e){return Number(e!=1)}},be:{name:"Belarusian",numbers:[5,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},bn:{name:"Bengali",numbers:[2,1],plurals:function(e){return Number(e!=1)}},bo:{name:"Tibetan",numbers:[1],plurals:function(e){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(e){return Number(e>1)}},bs:{name:"Bosnian",numbers:[5,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[2,1],plurals:function(e){return Number(e!=1)}},cgg:{name:"Chiga",numbers:[1],plurals:function(e){return 0}},cs:{name:"Czech",numbers:[5,1,2],plurals:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)}},csb:{name:"Kashubian",numbers:[5,1,2],plurals:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[3,1,2,8],plurals:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)}},da:{name:"Danish",numbers:[2,1],plurals:function(e){return Number(e!=1)}},de:{name:"German",numbers:[2,1],plurals:function(e){return Number(e!=1)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(e){return 0}},el:{name:"Greek",numbers:[2,1],plurals:function(e){return Number(e!=1)}},en:{name:"English",numbers:[2,1],plurals:function(e){return Number(e!=1)}},eo:{name:"Esperanto",numbers:[2,1],plurals:function(e){return Number(e!=1)}},es:{name:"Spanish",numbers:[2,1],plurals:function(e){return Number(e!=1)}},es_ar:{name:"Argentinean Spanish",numbers:[2,1],plurals:function(e){return Number(e!=1)}},et:{name:"Estonian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},eu:{name:"Basque",numbers:[2,1],plurals:function(e){return Number(e!=1)}},fa:{name:"Persian",numbers:[1],plurals:function(e){return 0}},fi:{name:"Finnish",numbers:[2,1],plurals:function(e){return Number(e!=1)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(e){return Number(e>1)}},fo:{name:"Faroese",numbers:[2,1],plurals:function(e){return Number(e!=1)}},fr:{name:"French",numbers:[1,2],plurals:function(e){return Number(e>1)}},fur:{name:"Friulian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},fy:{name:"Frisian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ga:{name:"Irish",numbers:[3,1,2,7,11],plurals:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)}},gd:{name:"Scottish Gaelic",numbers:[20,1,2,3],plurals:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)}},gl:{name:"Galician",numbers:[2,1],plurals:function(e){return Number(e!=1)}},gu:{name:"Gujarati",numbers:[2,1],plurals:function(e){return Number(e!=1)}},gun:{name:"Gun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ha:{name:"Hausa",numbers:[2,1],plurals:function(e){return Number(e!=1)}},he:{name:"Hebrew",numbers:[2,1],plurals:function(e){return Number(e!=1)}},hi:{name:"Hindi",numbers:[2,1],plurals:function(e){return Number(e!=1)}},hr:{name:"Croatian",numbers:[5,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},hy:{name:"Armenian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ia:{name:"Interlingua",numbers:[2,1],plurals:function(e){return Number(e!=1)}},id:{name:"Indonesian",numbers:[1],plurals:function(e){return 0}},is:{name:"Icelandic",numbers:[2,1],plurals:function(e){return Number(e%10!=1||e%100==11)}},it:{name:"Italian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ja:{name:"Japanese",numbers:[1],plurals:function(e){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(e){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(e){return Number(e!==0)}},ka:{name:"Georgian",numbers:[1],plurals:function(e){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(e){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(e){return 0}},kn:{name:"Kannada",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ko:{name:"Korean",numbers:[1],plurals:function(e){return 0}},ku:{name:"Kurdish",numbers:[2,1],plurals:function(e){return Number(e!=1)}},kw:{name:"Cornish",numbers:[4,1,2,3],plurals:function(e){return Number(e==1?0:e==2?1:e==3?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(e){return 0}},lb:{name:"Letzeburgesch",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(e){return Number(e>1)}},lo:{name:"Lao",numbers:[1],plurals:function(e){return 0}},lt:{name:"Lithuanian",numbers:[10,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)}},mai:{name:"Maithili",numbers:[2,1],plurals:function(e){return Number(e!=1)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(e){return Number(e>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(e){return Number(e>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(e){return Number(e>1)}},mk:{name:"Macedonian",numbers:[2,1],plurals:function(e){return Number(e==1||e%10==1?0:1)}},ml:{name:"Malayalam",numbers:[2,1],plurals:function(e){return Number(e!=1)}},mn:{name:"Mongolian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(e){return Number(e==1?1:2)}},mr:{name:"Marathi",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ms:{name:"Malay",numbers:[1],plurals:function(e){return 0}},mt:{name:"Maltese",numbers:[2,1,11,20],plurals:function(e){return Number(e==1?0:e===0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)}},nah:{name:"Nahuatl",numbers:[2,1],plurals:function(e){return Number(e!=1)}},nap:{name:"Neapolitan",numbers:[2,1],plurals:function(e){return Number(e!=1)}},nb:{name:"Norwegian Bokmal",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ne:{name:"Nepali",numbers:[2,1],plurals:function(e){return Number(e!=1)}},nl:{name:"Dutch",numbers:[2,1],plurals:function(e){return Number(e!=1)}},nn:{name:"Norwegian Nynorsk",numbers:[2,1],plurals:function(e){return Number(e!=1)}},no:{name:"Norwegian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},nso:{name:"Northern Sotho",numbers:[2,1],plurals:function(e){return Number(e!=1)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(e){return Number(e>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(e){return Number(e!=1)}},pa:{name:"Punjabi",numbers:[2,1],plurals:function(e){return Number(e!=1)}},pap:{name:"Papiamento",numbers:[2,1],plurals:function(e){return Number(e!=1)}},pl:{name:"Polish",numbers:[5,1,2],plurals:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ps:{name:"Pashto",numbers:[2,1],plurals:function(e){return Number(e!=1)}},pt:{name:"Portuguese",numbers:[2,1],plurals:function(e){return Number(e!=1)}},pt_br:{name:"Brazilian Portuguese",numbers:[2,1],plurals:function(e){return Number(e!=1)}},rm:{name:"Romansh",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ro:{name:"Romanian",numbers:[2,1,20],plurals:function(e){return Number(e==1?0:e===0||e%100>0&&e%100<20?1:2)}},ru:{name:"Russian",numbers:[5,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(e){return 0}},sco:{name:"Scots",numbers:[2,1],plurals:function(e){return Number(e!=1)}},se:{name:"Northern Sami",numbers:[2,1],plurals:function(e){return Number(e!=1)}},si:{name:"Sinhala",numbers:[2,1],plurals:function(e){return Number(e!=1)}},sk:{name:"Slovak",numbers:[5,1,2],plurals:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},so:{name:"Somali",numbers:[2,1],plurals:function(e){return Number(e!=1)}},son:{name:"Songhay",numbers:[2,1],plurals:function(e){return Number(e!=1)}},sq:{name:"Albanian",numbers:[2,1],plurals:function(e){return Number(e!=1)}},sr:{name:"Serbian",numbers:[5,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(e){return 0}},sv:{name:"Swedish",numbers:[2,1],plurals:function(e){return Number(e!=1)}},sw:{name:"Swahili",numbers:[2,1],plurals:function(e){return Number(e!=1)}},ta:{name:"Tamil",numbers:[2,1],plurals:function(e){return Number(e!=1)}},te:{name:"Telugu",numbers:[2,1],plurals:function(e){return Number(e!=1)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(e){return Number(e>1)}},th:{name:"Thai",numbers:[1],plurals:function(e){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(e){return Number(e>1)}},tk:{name:"Turkmen",numbers:[2,1],plurals:function(e){return Number(e!=1)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(e){return Number(e>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(e){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(e){return 0}},uk:{name:"Ukrainian",numbers:[5,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[2,1],plurals:function(e){return Number(e!=1)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(e){return Number(e>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(e){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(e){return Number(e>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(e){return 0}},yo:{name:"Yoruba",numbers:[2,1],plurals:function(e){return Number(e!=1)}},zh:{name:"Chinese",numbers:[1],plurals:function(e){return 0}}},addRule:function(e,t){L.rules[e]=t},setCurrentLng:function(e){if(!L.currentRule||L.currentRule.lng!==e){var t=e.split("-");L.currentRule={lng:e,rule:L.rules[t[0]]}}},get:function(e,t){function r(t,n){var r;L.currentRule&&L.currentRule.lng===e?r=L.currentRule.rule:r=L.rules[t];if(r){var i=r.plurals(n),s=r.numbers[i];return r.numbers.length===2&&(s===2?s=1:s===1&&(s=-1)),s}return n===1?"1":"-1"}var n=e.split("-");return r(n[0],t)}},A={},O=function(e,t){A[e]=t},M=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var i=1,s=n.length,o="",u,a=[],f,l,c,h,p,d;for(f=0;f<s;f++){o=e(n[f]);if(o==="string")a.push(n[f]);else if(o==="array"){c=n[f];if(c[2]){u=r[i];for(l=0;l<c[2].length;l++){if(!u.hasOwnProperty(c[2][l]))throw M('[sprintf] property "%s" does not exist',c[2][l]);u=u[c[2][l]]}}else c[1]?u=r[c[1]]:u=r[i++];if(/[^s]/.test(c[8])&&e(u)!="number")throw M("[sprintf] expecting number but found %s",e(u));switch(c[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=c[7]?u.toExponential(c[7]):u.toExponential();break;case"f":u=c[7]?parseFloat(u).toFixed(c[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&c[7]?u.substring(0,c[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(c[8])&&c[3]&&u>=0?"+"+u:u,p=c[4]?c[4]=="0"?"0":c[4].charAt(1):" ",d=c[6]-String(u).length,h=c[6]?t(p,d):"",a.push(c[5]?u+h:h+u)}}return a.join("")},n.cache={},n.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw"[sprintf] huh?";if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw"[sprintf] huh?";s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw"[sprintf] huh?";s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r},n}(),_=function(e,t){return t.unshift(e),M.apply(null,t)};O("sprintf",function(e,t,n){return n.sprintf?Object.prototype.toString.apply(n.sprintf)==="[object Array]"?_(e,n.sprintf):typeof n.sprintf=="object"?M(e,n.sprintf):e:e}),n.init=d,n.setLng=m,n.preload=v,n.t=x,n.translate=x,n.detectLanguage=p.detectLanguage,n.pluralExtensions=L,n.sync=C,n.functions=p,n.lng=g,n.addPostProcessor=O,n.options=u})();</script>
<script type="text/javascript">﻿
function resources()  { 
    var resources = {
        dev: { translation: { 'key': 'value' } },
        en: { translation: { 
                ' Meter Höhe bei Kilometer ': ' meters high by kilometer ',
                'Höhe (m)': 'Height (m)',
                'Distanz (km), Total': 'Distance (km), total: ',
                "Addresse nicht gefunden.": 'address not found',
                "Addressensuche gescheitert.": 'Address lookup failed.',
                "Es können nicht mehr als 10 Punkte eingegeben werden": "It can't be more than ten points.",
                "Could not find a route between these points": 'Could not find a route between these points',
                "Directions request failed": 'Directions request failed'
                } 
          },
        fr: { translation: { 
                ' Meter Höhe bei Kilometer ': " mètre d'altitude au kilomètre  ",
                'Höhe (m)': 'Altitude (m)',
                'Distanz (km), Total': 'Distance (Km), total:',
                'Addresse nicht gefunden.': 'Adresse non trouvée.',
                'Addressensuche gescheitert.':'la recherche a échouée.',
                'Es können nicht mehr als 10 Punkte eingegeben werden': 'il ne peut pas y avoir plus de 10 points.',
                'Could not find a route between these points': 'une route entre ces deux points ne peut pas être trouvée.',
                'Directions request failed': 'La requête de direction a echouée.'
                } 
          },
        de: { translation: { 
                ' Meter Höhe bei Kilometer ': ' Meter Höhe bei Kilometer ',
                'Höhe (m)': 'Höhe (m)',
                'Distanz (km), Total': 'Distanz (km), Total: ',
                "Addresse nicht gefunden.": 'Addresse nicht gefunden.',
                "Addressensuche gescheitert.":'Addressensuche gescheitert.',
                "Es können nicht mehr als 10 Punkte eingegeben werden": 'Es können nicht mehr als 10 Punkte eingegeben werden.',
                "Could not find a route between these points": 'Could not find a route between these points',
                "Directions request failed": 'Directions request failed',
                }
          }
    };
return resources;
}</script>
<script type="text/javascript">/*! URI.js v1.7.1 http://medialize.github.com/URI.js/ */
/* build contains: URI.js */
(function(g){function j(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function l(a){return"[object Array]"===String(Object.prototype.toString.call(a))}function p(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape)}var d="undefined"!==typeof module&&module.exports,o=d?require("./punycode"):window.punycode,q=d?require("./IPv6"):window.IPv6,n=d?require("./SecondLevelDomains"):window.SecondLevelDomains,e=function(a,b){if(!(this instanceof e))return new e(a,b);a===g&&(a=location.href+
"");this.href(a);return b!==g?this.absoluteTo(b):this},d=e.prototype;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.defaultPorts={http:"80",https:"443",ftp:"21"};e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;e.encode=p;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=p;e.decode=decodeURIComponent};
e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};
e.encodeQuery=function(a){return e.encode(a+"").replace(/%20/g,"+")};e.decodeQuery=function(a){return e.decode((a+"").replace(/\+/g,"%20"))};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);return a.join("/")};var i={encode:"encode",decode:"decode"},h,m=function(a,b){return function(c){return e[b](c+"").replace(e.characters[a][b].expression,
function(c){return e.characters[a][b].map[c]})}};for(h in i)e[h+"PathSegment"]=m("pathname",i[h]);e.encodeReserved=m("reserved","encode");e.parse=function(a){var b,c={};b=a.indexOf("#");-1<b&&(c.fragment=a.substring(b+1)||null,a=a.substring(0,b));b=a.indexOf("?");-1<b&&(c.query=a.substring(b+1)||null,a=a.substring(0,b));"//"===a.substring(0,2)?(c.protocol="",a=a.substring(2),a=e.parseAuthority(a,c)):(b=a.indexOf(":"),-1<b&&(c.protocol=a.substring(0,b),"//"===a.substring(b+1,b+3)?(a=a.substring(b+
3),a=e.parseAuthority(a,c)):(a=a.substring(b+1),c.urn=!0)));c.path=a;return c};e.parseHost=function(a,b){var c=a.indexOf("/"),f;-1===c&&(c=a.length);"["===a[0]?(f=a.indexOf("]"),b.hostname=a.substring(1,f)||null,b.port=a.substring(f+2,c)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(f=a.substring(0,c).split(":"),b.hostname=f[0]||null,b.port=f[1]||null);b.hostname&&"/"!==a.substring(c)[0]&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,
b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("@"),f=a.indexOf("/");-1<c&&(-1===f||c<f)?(f=a.substring(0,c).split(":"),b.username=f[0]?e.decode(f[0]):null,b.password=f[1]?e.decode(f[1]):null,a=a.substring(c+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var b={},a=a.split("&"),c=a.length,f=0;f<c;f++){var k=a[f].split("="),d=e.decodeQuery(k.shift()),
k=k.length?e.decodeQuery(k.join("=")):null;b[d]?("string"===typeof b[d]&&(b[d]=[b[d]]),b[d].push(k)):b[d]=k}return b};e.build=function(a){var b="";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path[0]&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)e.ip6_expression.test(a.hostname)?
b=a.port?b+("["+a.hostname+"]:"+a.port):b+a.hostname:(b+=a.hostname,a.port&&(b+=":"+a.port));else return"";return b};e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b){var c="",f;for(f in a)if(Object.hasOwnProperty.call(a,f)&&f)if(l(a[f]))for(var k={},d=0,h=a[f].length;d<h;d++)a[f][d]!==g&&k[a[f][d]+""]===g&&(c+="&"+e.buildQueryParameter(f,
a[f][d]),!0!==b&&(k[a[f][d]+""]=!0));else a[f]!==g&&(c+="&"+e.buildQueryParameter(f,a[f]));return c.substring(1)};e.buildQueryParameter=function(a,b){return e.encodeQuery(a)+(null!==b?"="+e.encodeQuery(b):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&e.addQuery(a,f,b[f]);else if("string"===typeof b)a[b]===g?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),l(c)||(c=[c]),a[b]=a[b].concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
};e.removeQuery=function(a,b,c){if(l(b))for(var c=0,f=b.length;c<f;c++)a[b[c]]=g;else if("object"===typeof b)for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&e.removeQuery(a,f,b[f]);else if("string"===typeof b)if(c!==g)if(a[b]===c)a[b]=g;else{if(l(a[b])){var f=a[b],k={},d,h;if(l(c)){d=0;for(h=c.length;d<h;d++)k[c[d]]=!0}else k[c]=!0;d=0;for(h=f.length;d<h;d++)k[f[d]]!==g&&(f.splice(d,1),h--,d--);a[b]=f}}else a[b]=g;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");
};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),f;for(f=0;f<c;f++)if(a[f]!==b[f]){f--;break}if(1>f)return a[0]===b[0]&&"/"===a[0]?"/":"";"/"!==a[f]&&(f=a.substring(0,f).lastIndexOf("/"));return a.substring(0,f+1)};e.withinString=function(a,b){return a.replace(e.find_uri_expression,b)};e.ensureValidHostname=function(a){if(a.match(e.invalid_hostname_characters)){if(!o)throw new TypeError("Hostname '"+a+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(o.toASCII(a).match(e.invalid_hostname_characters))throw new TypeError("Hostname '"+
a+"' contains characters other than [A-Z0-9.-]");}};d.build=function(a){if(!0===a)this._deferred_build=!0;else if(a===g||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};d.clone=function(){return new e(this)};d.toString=function(){return this.build(!1)._string};d.valueOf=function(){return this.toString()};i={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};m=function(a){return function(b,c){if(b===g)return this._parts[a]||
"";this._parts[a]=b;this.build(!c);return this}};for(h in i)d[h]=m(i[h]);i={query:"?",fragment:"#"};m=function(a,b){return function(c,f){if(c===g)return this._parts[a]||"";null!==c&&(c+="",c[0]===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!f);return this}};for(h in i)d[h]=m(h,i[h]);i={search:["?","query"],hash:["#","fragment"]};m=function(a,b){return function(c,f){var e=this[a](c,f);return"string"===typeof e&&e.length?b+e:e}};for(h in i)d[h]=m(i[h][1],i[h][0]);d.pathname=function(a,b){if(a===
g||!0===a){var c=this._parts.path||(this._parts.urn?"":"/");return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};d.path=d.pathname;d.href=function(a,b){if(a===g)return this.toString();this._string="";this._parts={protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null};var c=a instanceof e,f="object"===typeof a&&(a.hostname||a.path),d;if("string"===typeof a)this._parts=e.parse(a);else if(c||f)for(d in c=
c?a._parts:a,c)Object.hasOwnProperty.call(this._parts,d)&&(this._parts[d]=c[d]);else throw new TypeError("invalid input");this.build(!b);return this};d.is=function(a){var b=!1,c=!1,f=!1,d=!1,g=!1,h=!1,i=!1,j=!this._parts.urn;this._parts.hostname&&(j=!1,c=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=c||f,g=(d=!b)&&n&&n.has(this._parts.hostname),h=d&&e.idn_expression.test(this._parts.hostname),i=d&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return j;
case "absolute":return!j;case "domain":case "name":return d;case "sld":return g;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return f;case "idn":return h;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return i}return null};var s=d.protocol,t=d.port,u=d.hostname;d.protocol=function(a,b){if(a!==g&&a&&(a=a.replace(/:(\/\/)?$/,""),a.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");
return s.call(this,a,b)};d.scheme=d.protocol;d.port=function(a,b){if(this._parts.urn)return a===g?"":this;if(a!==g&&(0===a&&(a=null),a&&(a+="",":"===a[0]&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return t.call(this,a,b)};d.hostname=function(a,b){if(this._parts.urn)return a===g?"":this;if(a!==g){var c={};e.parseHost(a,c);a=c.hostname}return u.call(this,a,b)};d.host=function(a,b){if(this._parts.urn)return a===g?"":this;if(a===g)return this._parts.hostname?
e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};d.authority=function(a,b){if(this._parts.urn)return a===g?"":this;if(a===g)return this._parts.hostname?e.buildAuthority(this._parts):"";e.parseAuthority(a,this._parts);this.build(!b);return this};d.userinfo=function(a,b){if(this._parts.urn)return a===g?"":this;if(a===g){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}"@"!==a[a.length-1]&&(a+="@");e.parseUserinfo(a,
this._parts);this.build(!b);return this};d.subdomain=function(a,b){if(this._parts.urn)return a===g?"":this;if(a===g){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=RegExp("^"+j(c));a&&"."!==a[a.length-1]&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,a);this.build(!b);
return this};d.domain=function(a,b){if(this._parts.urn)return a===g?"":this;"boolean"===typeof a&&(b=a,a=g);if(a===g){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);!this._parts.hostname||this.is("IP")?
this._parts.hostname=a:(c=RegExp(j(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};d.tld=function(a,b){if(this._parts.urn)return a===g?"":this;"boolean"===typeof a&&(b=a,a=g);if(a===g){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&n&&n.list[c.toLowerCase()]?n.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(n&&n.is(a))c=RegExp(j(this.tld())+
"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError("TLD '"+a+"' contains characters other than [A-Z0-9]");else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=RegExp(j(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};d.directory=function(a,b){if(this._parts.urn)return a===g?"":this;if(a===g||!0===a){if(!this._parts.path&&
!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=RegExp("^"+j(c));this.is("relative")||(a||(a="/"),"/"!==a[0]&&(a="/"+a));a&&"/"!==a[a.length-1]&&(a+="/");a=e.recodePath(a);this._parts.path=this._parts.path.replace(c,a);this.build(!b);return this};d.filename=
function(a,b){if(this._parts.urn)return a===g?"":this;if(a===g||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1;"/"===a[0]&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var f=RegExp(j(this.filename())+"$"),a=e.recodePath(a);this._parts.path=this._parts.path.replace(f,a);c?this.normalizePath(b):this.build(!b);return this};d.suffix=function(a,b){if(this._parts.urn)return a===
g?"":this;if(a===g||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),f=c.lastIndexOf(".");if(-1===f)return"";c=c.substring(f+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(c):c}"."===a[0]&&(a=a.substring(1));if(c=this.suffix())f=a?RegExp(j(c)+"$"):RegExp(j("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}f&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(f,a));this.build(!b);return this};d.segment=function(a,b,
c){var e=this._parts.urn?":":"/",d=this.path(),r="/"===d.substring(0,1),d=d.split(e);"number"!==typeof a&&(c=b,b=a,a=g);if(a!==g&&"number"!==typeof a)throw Error("Bad segment '"+a+"', must be 0-based integer");r&&d.shift();0>a&&(a=Math.max(d.length+a,0));if(b===g)return a===g?d:d[a];if(null===a||d[a]===g)if(l(b))d=b;else{if(b||"string"===typeof b&&b.length)""===d[d.length-1]?d[d.length-1]=b:d.push(b)}else b||"string"===typeof b&&b.length?d[a]=b:d.splice(a,1);r&&d.unshift("");return this.path(d.join(e),
c)};var v=d.query;d.query=function(a,b){return!0===a?e.parseQuery(this._parts.query):a!==g&&"string"!==typeof a?(this._parts.query=e.buildQuery(a),this.build(!b),this):v.call(this,a,b)};d.addQuery=function(a,b,c){var f=e.parseQuery(this._parts.query);e.addQuery(f,a,b);this._parts.query=e.buildQuery(f);"string"!==typeof a&&(c=b);this.build(!c);return this};d.removeQuery=function(a,b,c){var f=e.parseQuery(this._parts.query);e.removeQuery(f,a,b);this._parts.query=e.buildQuery(f);"string"!==typeof a&&
(c=b);this.build(!c);return this};d.addSearch=d.addQuery;d.removeSearch=d.removeQuery;d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};d.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};
d.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&o?this._parts.hostname=o.toASCII(this._parts.hostname):this.is("IPv6")&&q&&(this._parts.hostname=q.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};d.normalizePort=function(a){"string"===typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};d.normalizePath=function(a){if(this._parts.urn||
!this._parts.path||"/"===this._parts.path)return this;var b,c,f=this._parts.path,d,g;"/"!==f[0]&&("."===f[0]&&(c=f.substring(0,f.indexOf("/"))),b=!0,f="/"+f);for(f=f.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){d=f.indexOf("/../");if(-1===d)break;else if(0===d){f=f.substring(3);break}g=f.substring(0,d).lastIndexOf("/");-1===g&&(g=d);f=f.substring(0,g)+f.substring(d+3)}b&&this.is("relative")&&(f=c?c+f:f.substring(1));f=e.recodePath(f);this._parts.path=f;this.build(!a);return this};d.normalizePathname=d.normalizePath;
d.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query)):this._parts.query=null,this.build(!a));return this};d.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));return this};d.normalizeSearch=d.normalizeQuery;d.normalizeHash=d.normalizeFragment;d.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};
d.unicode=function(){var a=e.encode,b=e.decode;e.encode=p;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};d.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&(a.is("punycode")&&o?(b+=o.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&(a._parts.path&&"/"!==a._parts.path[0])&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c=
"",f=0,d=a._parts.query.split("&"),h=d.length;f<h;f++){var i=(d[f]||"").split("="),c=c+("&"+e.decodeQuery(i[0]).replace(/&/g,"%26"));i[1]!==g&&(c+="="+e.decodeQuery(i[1]).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=a.hash()};d.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");if(this._parts.hostname)return b;a instanceof e||(a=new e(a));for(var f=
0,d;d=c[f];f++)b._parts[d]=a._parts[d];"/"!==b.path()[0]&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};d.relativeTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");a instanceof e||(a=new e(a));if("/"!==this.path()[0]||"/"!==a.path()[0])throw Error("Cannot calculate common path from non-relative URLs");f=e.commonPath(b.path(),
a.path());for(var a=a.directory(),d=0,g;g=c[d];d++)b._parts[g]=null;if(!f||"/"===f)return b;if(a+"/"===f)b._parts.path="./"+b.filename();else{c="../";f=RegExp("^"+j(f));for(a=a.replace(f,"/").match(/\//g).length-1;a--;)c+="../";b._parts.path=b._parts.path.replace(f,c)}b.build();return b};d.equals=function(a){var b=this.clone(),c=new e(a),f={},d={},a={},g;b.normalize();c.normalize();if(b.toString()===c.toString())return!0;f=b.query();d=c.query();b.query("");c.query("");if(b.toString()!==c.toString()||
f.length!==d.length)return!1;f=e.parseQuery(f);d=e.parseQuery(d);for(g in f)if(Object.prototype.hasOwnProperty.call(f,g)){if(l(f[g])){if(!l(d[g])||f[g].length!==d[g].length)return!1;f[g].sort();d[g].sort();b=0;for(c=f[g].length;b<c;b++)if(f[g][b]!==d[g][b])return!1}else if(f[g]!==d[g])return!1;a[g]=!0}for(g in d)if(Object.prototype.hasOwnProperty.call(d,g)&&!a[g])return!1;return!0};"undefined"!==typeof module&&module.exports?module.exports=e:window.URI=e})();
</script>
<script type="text/javascript">// -*- coding: utf-8; -*-
var sPath = window.location.pathname;
var sPage = sPath.substring(sPath.lastIndexOf('/') + 1);
var lang = "de";
if(sPage == "index_de.html") lang = "de";
if(sPage == "index_fr.html") lang = "fr";
if(sPage == "index_en.html") lang = "en";

i18n.init({lng:lang, resStore: resources()});


TerrainProfile = function() { }
TerrainProfile.prototype.map = null;
TerrainProfile.prototype.chart = null;
TerrainProfile.prototype.directionsDisplay = null;
TerrainProfile.prototype.geocoderService = null;
TerrainProfile.prototype.elevationService = null;
TerrainProfile.prototype.directionsService = null;
TerrainProfile.prototype.uriContent = null;
TerrainProfile.prototype.mousemarker = null;
TerrainProfile.prototype.markers = [];
TerrainProfile.prototype.polyline = null;
TerrainProfile.prototype.elevations = null;
TerrainProfile.prototype.SAMPLES = 512;
TerrainProfile.prototype.markerIcons = new Array("http://www.google.com/mapfiles/markerA.png",
                                        "http://www.google.com/mapfiles/markerB.png",
                                        "http://www.google.com/mapfiles/markerC.png",
                                        "http://www.google.com/mapfiles/markerD.png",
                                        "http://www.google.com/mapfiles/markerE.png",
                                        "http://www.google.com/mapfiles/markerF.png",
                                        "http://www.google.com/mapfiles/markerG.png",
                                        "http://www.google.com/mapfiles/markerH.png",
                                        "http://www.google.com/mapfiles/markerI.png",
                                        "http://www.google.com/mapfiles/markerJ.png",
                                        "http://www.google.com/mapfiles/markerK.png",
                                        "http://www.google.com/mapfiles/markerL.png",
                                        "http://www.google.com/mapfiles/markerM.png");


TerrainProfile.prototype.default_path = {
    // Zürich Bern
    latlngs: [
    [47.374, 8.530],
    [46.949,7.443]
    ],
    mapType: google.maps.MapTypeId.ROADMAP,
    travelMode: 'direct'
};

// adding ability to measure euclidean distance of polylines
google.maps.LatLng.prototype.kmTo = function(a) {
  var e = Math, ra = e.PI/180;
  var b = this.lat() * ra, c = a.lat() * ra, d = b - c;
  var g = this.lng() * ra - a.lng() * ra;
  var f = 2 * e.asin(e.sqrt(e.pow(e.sin(d/2), 2) + e.cos(b) * e.cos
			    (c) * e.pow(e.sin(g/2), 2)));
  return f * 6378.137;
} 
google.maps.Polyline.prototype.inKm = function(n){
  var a = this.getPath(n), len = a.getLength(), dist = 0;
  for(var i=0; i<len-1; i++){
    dist += a.getAt(i).kmTo(a.getAt(i+1));
  }
  return dist;
} 



TerrainProfile.prototype.createPermalink = function() {
  var self = this;
  
  var latlngs_string = "(";
  for (var i in self.markers) {
    latlngs_string += "(" + self.markers[i].getPosition().lat().toFixed(6) 
                          + "," 
                          + self.markers[i].getPosition().lng().toFixed(6) + "),"
  }
  latlngs_string += ")";
  
  var uri = new URI();
  uri.search("latlngs=" + latlngs_string + "&travelMode=" + document.getElementById("mode").value);
  location.href = uri;			  
}

// Takes an array of ElevationResult objects, draws the path on the map
// and plots the elevation profile on a GViz ColumnChart
TerrainProfile.prototype.plotElevation = function(results) {
  var self = this;
  
  self.elevations = results;
  
  var path = [];
  
  if (!results) {
    // sometimes we don't get any results. Then we do something bad.. wait a while
    console.log("sleep for a second");
    document.getElementById("loading").style.display="block";
    setTimeout(function() {  self.updateElevation();  }, 1000);
    return false;
  }
  document.getElementById("loading").style.display="none";
  
  for (var i = 0; i < results.length; i++) {
    path.push(self.elevations[i].location);
  }
  
  if (self.polyline) {
    self.polyline.setMap(null);
  }
  
  var polymap = null;
  var travelMode =  document.getElementById("mode").value;
  if (travelMode == 'direct') {
    polymap = self.map;
  }
  
  self.polyline = new google.maps.Polyline({
    path: path,
    strokeColor: "#000000",
    map: polymap
  });
  var totalLength = Math.floor(self.polyline.inKm()*10)/10;
  if (totalLength < 1) {
    totalLength = Math.floor(self.polyline.inKm()*1000)/1000;
  }
  
  var csv_content = "distance_km, height_m, lat, lng\n";
  var data = new google.visualization.DataTable();
  
  data.addColumn('number', 'Distance');
  data.addColumn('number', 'Elevation');
  data.addColumn({type: 'string', role: 'tooltip'});
  
  for (var i = 0; i < results.length; i++) {
    x = Math.round(1000*totalLength * i/self.SAMPLES)/1000;
    y = Math.round(self.elevations[i].elevation*10)/10;
    data.addRow([x,y, y + i18n.t(" Meter Höhe bei Kilometer ") + Math.round(x*100)/100]);
    csv_content += x + ", " + y + ", " + path[i].lat() + ", " + path[i].lng() + "\n";
  }
  
  document.getElementById('chart_div').style.display = 'block';
  document.getElementById('export_link').style.display = 'block';
  document.getElementById('permalink').style.display = 'block';
  
  self.chart.draw(data, {
    height: 300,
    legend: 'none',
    titleY: i18n.t('Höhe (m)'),
    titleX: i18n.t('Distanz (km), Total')+ " " + totalLength + ' [km]',
    pointSize: 2,
    focusBorderColor: '#00ff00'
  });
  uriContent = "data:application/octet-stream," + encodeURIComponent(csv_content);  
  document.getElementById('export_link').onclick = function() {
    myWindow=window.open('','','width=700,height=400');
    myWindow.document.write('<div id="csvPresentator" style="display:none;"><textarea id="txtCSV" cols="80" rows="20" ></textarea></div>');
    myWindow.focus()
    myWindow.document.getElementById("txtCSV").value = csv_content;
    myWindow.document.getElementById("csvPresentator").style.display = "block";
    if(navigator.appName != "Microsoft Internet Explorer")
        myWindow.document.getElementById("txtCSV").select();
    else {
        var range = myWindow.document.getElementById('txtCSV').createTextRange();
        range.collapse(true);
        range.moveStart('character', 0);
        range.moveEnd('character', csv_content.length);
        range.select();
    }
    
    return false;
  }
  //document.getElementById('export_link').href = uriContent;
  
}

// Remove the green rollover marker when the mouse leaves the chart
TerrainProfile.prototype.clearMouseMarker = function() {
  if (this.mousemarker != null) {
    this.mousemarker.setMap(null);
    this.mousemarker = null;
  }
}

// Geocode an address and add a marker for the result
TerrainProfile.prototype.addAddress = function() {
  var self = this;
  var address = document.getElementById('address').value;
  self.geocoderService.geocode({ 'address': address }, function(results, status) {
    document.getElementById('address').value = "";
    if (status == google.maps.GeocoderStatus.OK) {
      var latlng = results[0].geometry.location;
      self.addMarker(latlng, true, true);
      if (self.markers.length > 1) {
	var bounds = new google.maps.LatLngBounds();
	for (var i in markers) {
	  bounds.extend(markers[i].getPosition());
	}
	self.map.fitBounds(bounds);
      } else {
	self.map.fitBounds(results[0].geometry.viewport);
      }
    } else if (status == google.maps.GeocoderStatus.ZERO_RESULTS) {
      alert(i18n.t("Addresse nicht gefunden."));
    } else {
      alert(i18n.t("Addressensuche gescheitert."));
    }
  })
}

// Add a marker and trigger recalculation of the path and elevation
TerrainProfile.prototype.addMarker = function(latlng, doQuery, showOnMap) {
  var self = this;
  if (self.markers.length < 10) {
    
    var marker = new google.maps.Marker({
      position: latlng,
      title: ""+(self.markers.length+1),
      icon:self.markerIcons[self.markers.length],
      draggable: true
    })
    
    self.markers.push(marker);
    
    google.maps.event.addListener(marker, 'dragend', function(e) {
      self.updateElevation();
    });
    
    
    if (doQuery) {
      self.updateElevation();
    }
    
    if (showOnMap) {
      marker.setMap(self.map);
    }
    
    if (self.markers.length == 10) {
      document.getElementById('address').disabled = true;
    }
  } else {
    alert(i18n.t("Es können nicht mehr als 10 Punkte eingegeben werden"));
  }
}

TerrainProfile.prototype.clearPaths = function() {
  var self = this;
  
  if (self.polyline) {
    self.polyline.setMap(null);
  }
  
  self.directionsDisplay.setMap(null);
  
  for (var i in self.markers) {
    self.markers[i].setMap(null);
  }
}

// Trigger the elevation query for point to point
// or submit a directions request for the path between points
TerrainProfile.prototype.updateElevation = function() {
  var self = this;
  
  self.clearPaths();
  if (self.markers.length > 1) {
    var travelMode =  document.getElementById("mode").value;
    if (travelMode != 'direct') {
      self.calcRoute(travelMode);
    } else {
      var latlngs = [];
      for (var i in self.markers) {
        self.markers[i].setMap(self.map);
        latlngs.push(self.markers[i].getPosition())
      }
      self.elevationService.getElevationAlongPath({ 
	path: latlngs,
	samples: self.SAMPLES
      }, function (results) { self.plotElevation(results) } );
    }
  }
}

// Submit a directions request for the path between points and an
// elevation request for the path once returned
TerrainProfile.prototype.calcRoute = function(travelMode) {
  var self = this;
  var origin = self.markers[0].getPosition();
  var destination = self.markers[self.markers.length - 1].getPosition();
  
  var waypoints = [];
  for (var i = 1; i < self.markers.length - 1; i++) {
    waypoints.push({
      location: self.markers[i].getPosition(),
      stopover: true
    });
  }
  
  var request = {
    origin: origin,
    destination: destination,
    waypoints: waypoints
  };
  
  switch (travelMode) {
  case "bicycling":
    request.travelMode = google.maps.DirectionsTravelMode.BICYCLING;
    break;
  case "driving":
    request.travelMode = google.maps.DirectionsTravelMode.DRIVING;
    break;
  case "walking":
    request.travelMode = google.maps.DirectionsTravelMode.WALKING;
    break;
  }
  
  self.directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      self.clearPaths();
      self.directionsDisplay.setMap(self.map);
      self.directionsDisplay.setDirections(response);
    } else if (status == google.maps.DirectionsStatus.ZERO_RESULTS) {
      alert(i18n.t("Could not find a route between these points"));
    } else {
      alert(i18n.t("Directions request failed"));
    }
  });
}

// Trigger a geocode request when the Return key is
// pressed in the address field
TerrainProfile.prototype.addressKeyHandler = function(e) {
  var self = this;
  var keycode;
  if (window.event) {
    keycode = window.event.keyCode;
  } else if (e) {
    keycode = e.which;
  } else {
    return true;
  }
  
  if (keycode == 13) {
    self.addAddress();
    return false;
  } else {
    return true;
  }
}

TerrainProfile.prototype.loadPath = function() {
  var self = this;
  
  self.reset();
  
  var my_path = self.default_path;
  
  // parse URI
  var uri = new URI;
  var params = URI.parseQuery(uri.query());
  if (params.latlngs){
    var converted_latlngs = params.latlngs.replace(/\(/g,"[").replace(/\)/g,"]");
    my_path.latlngs = eval(converted_latlngs);
  }			
  if (params.travelMode){
    my_path.travelMode = params.travelMode;
  }			
  
  self.map.setMapTypeId(my_path.mapType);
  document.getElementById('mode').value = my_path.travelMode;
  var bounds = new google.maps.LatLngBounds();
  for (var i = 0; i < my_path.latlngs.length; i++) {
    var latlng = new google.maps.LatLng(
      my_path.latlngs[i][0],
      my_path.latlngs[i][1]
    );
    self.addMarker(latlng, false, true);
    bounds.extend(latlng);
  }
  self.map.fitBounds(bounds);
  self.updateElevation();
}

// Clear all overlays, reset the array of points, and hide the chart
TerrainProfile.prototype.reset = function() {
  this.clearPaths();
  this.markers = [ ];
  document.getElementById('address').disabled = false;
  document.getElementById('chart_div').style.display = 'none';
  document.getElementById('export_link').style.display = 'none';
  document.getElementById('permalink').style.display = 'none';
}

TerrainProfile.prototype.initialize = function() {
  var self = this;
  self.directionsDisplay = new google.maps.DirectionsRenderer({draggable: true, 
							       preserveViewport: true,
							       suppressBicyclingLayer: true,
                                   });
  var myLatlng = new google.maps.LatLng(47.374, 8.530);
  var myOptions = {
    zoom: 1,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  }
  
  self.map   = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  self.chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
  self.geocoderService   = new google.maps.Geocoder();
  self.elevationService  = new google.maps.ElevationService();
  self.directionsService = new google.maps.DirectionsService();
  self.directionsDisplay.setMap(this.map);    
  
  // check if the user has changed the direction and redo everything
  google.maps.event.addListener(this.directionsDisplay, 'directions_changed', function() {
    var route = self.directionsDisplay.getDirections().routes[0];
    self.markers =  [ ];
    self.addMarker(route.legs[0].start_location, false, false);
    for(var i in route.legs) {
      self.addMarker(route.legs[i].end_location, false, false);
    }
    var response = self.directionsDisplay.getDirections();
    self.elevationService.getElevationAlongPath({
      path: route.overview_path,
      samples: self.SAMPLES
    }, function(results) { self.plotElevation(results); });
  });
  
  google.maps.event.addListener(self.map, 'click', function(event) {
    self.addMarker(event.latLng, true, true);
  });
  
  google.visualization.events.addListener(self.chart, 'onmouseover', function(e) {
    if (self.mousemarker == null) {
      self.mousemarker = new google.maps.Marker({
	position: self.elevations[e.row].location,
	map: self.map,
	icon: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
      });
    } else {
      self.mousemarker.setPosition(self.elevations[e.row].location);
    }
  });
  
  self.loadPath();
}

// Load the Visualization API and the piechart package.
google.load("visualization", "1", {packages: ["corechart"]});

// Set a callback to run when the Google Visualization API is loaded.
var tp = new TerrainProfile();
google.setOnLoadCallback(function () { 
  tp.initialize(); 
});
</script>
<style type="text/css">body {
  font-family: sans-serif
}

#map_canvas {
  margin: 5px 0px 5px 0px;
}

heading {
    text-align:center;
    font-size:25px;
}

help {
  font-size:small;
}</style>
<script type="text/javascript">
  // GA Analytics
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-618318-11']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
    <a href="index_de.html">de</a>  <a href="index_fr.html">fr</a>  <a href="index_en.html">en</a>
  <h2 style="text-align:center;font-size:25px">Calcul automatique de profil d'altitude Version 2.0 (bêta)&nbsp; &nbsp; &nbsp;<a href="http://www.ebp.ch">
	<img style=" border-style:none;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPIAAAAUCAMAAACAq5AJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURSsvMS4wLycxMisxMTE0MzI3ODM4NzU6Ojo8PD4/QTtAPztBQXs9HUFDQ0NIRkVLS0lNTUZQT01SVFFVVFVcWlhdXFheYV1hYWFkZWFlaGZoZ2Vqa2lsbWhscGtwbm10c3J1dXR3eHZ5eHh8fnp+gHuAfn2BgX+Ih40uA4wuCYYyBYUyC4U6Do0wA4syCo46DoQyEIU6FIw1Eos6E4w9GpItApEtCZgsAZEwApEzC5U4Dpg1CpE2EJE6E5I9Gpg3EJw6E5o9Go1BG5ZAFpRCHJ1EG4hEIJNEIZVGKZRJJZNLK5hFJJhKI5tMK5lOMZlRLJZSNZJQOJZZN5xUMptWOJ9aNZxcPJpgPqBNJ6NTLaJUMaVVOqNbNqNcO6xeNateO6lgPJ1cQJ5hQaNeQqhfR6NhQqRmSKRqS6ljRKlmSqxrS6lrUqxwTqpxVKt0W6t8XrFrTLN3WK53Yalwaq57Y7N8Y7eCX6uAZ7SCZLWEbLyHZbqEaryKbbSKcraKeruLc7yMeL2Tdb6UesCJb8CKccOSd8OUfMWef8iVfYKEhYaHiIaLi4qLi42Qj46QkZWZmJ6enp6hn76UgKKlpKSmqKapqaiqq66xsrCxs7W4uLm6usSVgMSag8WejcqahM+fismckMuijMKgkcaplsqkksyplM2qmc2yndGrltKunNmumNGxmty2mty7ns2voM6zotOuodOzo9O3qdW4pNW7qti2ptm5pNu8q9S8sNu+teCzmNbArNvBrdTDs9zDs93Eu97Ju+LFsuLGvOLJtuLKu+jQvcHFxMXKycrMzM3O0M3Qz87S0tPU1NTY19Xa2t3e3t7g4eLOw+XSxOXTy+bYzOnTw+jUy+nZxOrZzOTX0OvX0uva0fLczfHd0/Ld2+3gze3i1/Hh1PPk2vbp1/Tp3fjs3fbw3+Lk5ezj4Orq6u3y8PLl4fXr5Pbt6fnt4/ju6/jv8Pbw4/bx7Pny5frz7P/67vL09Pf59vb8+/v18v72+/z69P7+/QAAAAAAAAAAAN3ivYoAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQBQYWludC5ORVQgdjMuNS41SYr84AAACUBJREFUWEelV394k1cVjqSKgrgKTKZF2xU3b+i+bzbtbb9M27naPYUOhq7aSUdouhJACkonGWCZZXPW7aEOHZuw0eHQFq04B6yQTWsGIw4moEuh2FFhbSxOXNpn0gAJ9/7he+6XpE0Hlep9+iTp/XHOee97fl2L/H+GiAY7/T6fv3vgv0gRA771FVvHqkoMnOl41efr6IuO9eRo+y3X0UjFuPg/iD2RPVPTNJ7HblnsHd0sN2Ps4bFqaMuyccZseta8+r9f9awYq1TLuM89o8azYz1J+wM65wZXQx+VQ+HmXHtkrCpaIZuRcI3P7rr6YdHX/lDo2mVbLJuvfbPaefjc0IEOB+y5465CzdC47h9NkBtXM3bImmbwgkKd4fDXB68mvmtxoU0LXjsKi3WMkI+mHB6SHiB6/eFQi51p7KFRtAo3CLsmyMPjg1ie+3YwsJjUeK8m/qANq++OAbJly7Vvpp1HrMMhgwb9BGa/yVn+t2lZBP1e7/HzMZmRcEfbK28RP3DsOORQYM9rCQtFNBLt2PNewob65mHmtOJQBWI1VAIHx42eP9m+xx9MBG9URgNt0f4XNM5tne+aInFjof0vdSQuLuQfruyS7Pe1WZIgHzsUefZT1yOR/fl1efTmKVNm/Mk04OJTN3x82o/h0UcbM603NjY2xuyiWNYpyogH2BTdXl6gMa7NaVJ2hZtm2XieY/Yf5BDLfWuLNY0VPkCeGPVvXfS9rmpdO5nAWT48JbRq3CijpeWg29NfPwtxpOUsIYWi44dLv9O30p7T860CDvfPKS4dkN07PaX+50tYnqOsU0kMri1AyOV6Qvh93rvunhd9c7WsZMee1rhp/PQnAHl6xlMfzti0cUqKcvuL0yc9sWnDJNB7OCPNekNmxow4ZNhw60kp9to5t0NLXy6gUz6z1ROiB+ByMIf7ATnGcrBM5SOedw/MCOYwvnJpHr8qZJwtE4JOG9zTgfuldGaU9EJTEWf31UJrzzIzffLcs3IVrmghbpzl89IzMKDnKwzXi7Wqf0fkyzj+3WLOsyzjhsdy2mcmva7QpF838VBEyn+ljadk9cwH3yDgaiXZsfV8rtV4nIS4GcSK+/WiamchlNx6XEqfA+or7sstArpqQ6WvaA3W5q64A6bjUgZ0xhwwczSW4djigJ0brHmw1DbfOZfu1APvLdIY7psVBGvyuGEYmp57VtQRPIPRJ2uSEVGNH/NqipHw10vZTqnQ4MbnLeM+cWMmjacJT0bKRpO/Gdafqu+/pGzC54bJQ0V7BGQIzSdib/+dcuU2XxjkzYPKH0hZT+4YFQNtiCyXyfIr4H1pWHSCXlzEQI7yidl3n4p5jZTJjo3FOe2+9bCU5wRlSyeidxsEfTksQ8VUwFjx13pCv0G90P8YRKSsIydw79vuMBgvF3K3zo17B2UnKCgKy/0IeYM75n7VMi6tsXEDolNlsfTx78QgT4yBTM3ExMbxbyZsGpG+IAX8wX/tDSpniejxlm0VuIVaIWqhpMysp8KFOwZkuGLWAXFZLMcJnwxn46vAGx3qJkTVYwlNUlIsY4cKhQYZkaKvrdkDbh3dgIw5+y54vfRrXNNVkXoUoArhUnX4nh0Wy3C0XcAOg2t+2gbOu4RIjuX0yTGFM+I/PvlpzLw5ccphuLka72PZ8ehzdaV5uN8nKbc23KVTMeV8mZQtdBv6Ui+IVz72iAyXYl/tKo8H/mn7uRTE8roY4NOn/4ZRUXeahllmqUipwXKeDEcutbvturpfx3ETcq3a5bdBSwKyE+J2YK2kX2CLtny1Z9V8pvGd0o9PbR9WR0C+/n2Q02jmjSnWNDPIRxYpg9sRtYNLdJ4P1+srzyN/o/usEnLQrezVVwOzW8WyMtTsqPL5c1JkI473mnLFR2/JsduzuZ5NY7UAqYplo6CgcM4aSsDbFV7I1mKQtRZ18jVkNBaHzJyY2QENxeE+HR5IDkgO3WxCfhtSk9NXehzyZ5NYRup6erL1cUV0MssOw9CpwviQJA2v8DAkFM9ODxS5iXOPnbxyZpOUTsUyCqyBjlzjLI/rvzBZjrcYJ7ow/lpRR1/dPQmW5/We6Vd+QJ2e4dz+awc3dJNl9qIJmVqROGS+IMFyqAA6bRyPAI3l7SLIRhbJHQF52pVZxuzFjR+gTDYCMhzaQZAP4nHBd/cXognbBT7AYbWys7ue9JZFZTXWybENbntstzl6CLKmJXVVoqohZgF9Jeoy/VMPjmvCEUp5cZZ/qfb6GTN01C0VyzGW4djhcBGuYpupa+8/TZYV5KQeO31qTOEQy9MTJkxTLpDMssHz9W54JfGqB07ZGCflyJy8GnsJdbvG82eFpBnL6CkMLR68WKcyntxIlg+HvIsSTlz/Crhok5S9BdwA5H5kbM2ETPWatdEvythDLFMvoFOCMYcf/qabkIc3nAnHHkpfKpbVuCmVPo9ZDyVm8JLCc+Jn3pYlcFU0Db2kvCHoBXnEsq+m9fipbdRBXZCLEG+AjLrBHbUvBPbvXtsByNkjWZblwzP2Lkr5cW2rgN958nQtQz/XYWYFE3IveOclDc9L+X38WIAZiuWSftlCvWHt3oC/dS2aYmLZpiAnPSuuEMtDkCenk4J3xqsKbg5qOJGtKKVw+8FIuIySU6Hqku4X8mHch4Mag3pkbPWsiESpM8WAk6KZhmPbRrKc1HBiYwLyDgYRX0R3Can7RahYYzNNyNEq6j946QVZD1NMlgH5vIyWq7JPHVhLRAZgicmy9ebNW7ZsxjiG/64AeTqmM3909NyR9A+ZDffU1KPn4mU6ALD0ssPf3Qew1g5+kSbno4csi16uUreRz90hKZzYQj7b44bNuAWN10l5AXV5BOR7kyCrhjN2vecpA8Kp78Tn72UI/YXtt+bSPnq1s1wh62Ox3IItxWgTep1o8ZW+NVIewKSZviZifGTChAkTqe+6Kc7p4/E8lo5WRPzkY1ardWrMoY+kpqRkxMzoWlB8m6F/4c4Fa9pRiLDTW4H389azNS5XTVi8tOxLADe/6R9YqHO5KnfQlnBr5W083/iGx4/WYkmly5X8zH7wV0M+FPFh2ay9UkYu4Y2g6e5A86JK1x7Zv9K10NWuVi4JrxPdJwry9srKhQ9i5uVKV+UKeky91+JyGBqUvXpZvrXI5XJRlvsPM/AjBAq69N0AAAAASUVORK5CYII="/></a>
  </h2>
  <div style="font-size:small;">
	<b>Mode d'emploi :</b> 
	Cliquez sur le bouton "Redémarrer". Vous pouvez créer un itinéraire en cliquant sur la carte ou en tapant une adresse à la place des nœuds.
	 Le profil d'altitude est automatiquement mis à jour.
	Astuce : vous pouvez également déplacer les nœuds. 
	Vous trouverez plus d'informations sur notre
	<a href="http://geo.ebp.ch/2010/09/15/gelandeprofile-berechnen-mit-google-maps">Blog</a>.
  </div>
  <div style="background-color: #C3D9FF; width:100%; margin-top:10px;">
  <table>
  <tr>
     <td style="text-align: left">
       <input type="button" value="Redémarrer (tous les points seront perdus)" onclick="tp.reset()"/>
     </td>
	<td style="text-align: center">Adresse du nœud suivant : <input type="text" id="address" size="35" onkeypress="return tp.addressKeyHandler(event)"/></td>
	<td style="text-align: right">
       Type d'itinéraire :
       <select id="mode" onchange="tp.updateElevation()">
	     <option value="direct">Ligne droite</option>
         <option value="driving">Autoroute</option>
         <option value="bicycling">Vélo</option> 
         <option value="walking">À pied</option>
       </select>
     </td>
     <td id="permalink"> 
       <a href="javascript:tp.createPermalink();">Créer un permalien</a>
     </td>
  </tr>
  </table>
  </div>
  <div id="loading" style="display:none;text-align:center;background-color:lightcoral; width:100%; border-top:10px;">
    Veuillez patienter. Les résultats sont en cours de chargement.
  </div>
  <div id="map_canvas" style="border: 4px solid #C3D9FF; width:99%; height:500px"></div>
  <div style="border: 4px solid #C3D9FF;width:99%; ">
    <div id="export_div">
     <a id="export_link" href="#" target="_blank" >Exporter comme CSV (s'ouvre dans une autre fenêtre). <span style="font-size:11px;"> </span></a>
    </div>
    <div id="chart_div" style="width:98%; height:300px" onmouseout="tp.clearMouseMarker()">
    </div>
  </div>
  <div id="Hinweise" style="margin-top:10px;font-size:11px;">
	Ce site web est basé sur un 
	<a href="http://gmaps-samples-v3.googlecode.com/svn/trunk/elevation/elevation-profile.html">exemple d'un développeur de chez Google</a>
	et a été modifié par <a href="http://www.ebp.ch">Ernst Basler + Partner AG</a>
	Les données proviennent seulement de Google et sont sous leur Copyright.
	Ce fichier HTML peut être stocké et utilisé localement, il peut être distribué (voir les notes sur la licence dans le code source).
	Nous répondons volontier aux questions par <a href="mailto:stephan.heuel@ebp.ch">E-Mail</a>.
  </div>
</body>
</html>
